(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7021:function(e,t,i){Promise.resolve().then(i.t.bind(i,775,23)),Promise.resolve().then(i.t.bind(i,5874,23)),Promise.resolve().then(i.bind(i,8294)),Promise.resolve().then(i.bind(i,9292))},8294:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return u}});var s=i(7437),a=i(2265),l=i(2537);i(9510);var n=i(1260),c=i(1100),d=i(3386),o=i(3147),r=i(9551);let m={title:"",firstName:"",lastName:"",patronym:"",phone:"",comment:"",code:""},p=(0,c.Pi)(()=>{let{itemIdToChange:e,setItemIdToChange:t}=d.default,resetForm=()=>{t(null)};return(0,s.jsx)(l.J9,{initialValues:m,onSubmit:t=>{e?n.default.changeApplication(t):n.default.addNewApplication(t),resetForm()},children:t=>((0,a.useEffect)(()=>{if(e){let i=n.default.list.find(t=>t.id===e);if(i){let e=i.userData;t.setValues(e)}}else t.setValues(m)},[e]),(0,s.jsxs)(l.l0,{className:"application-form",children:[(0,s.jsxs)("div",{className:"application-form__field",children:[(0,s.jsx)("label",{htmlFor:"title",children:"Наименование компании"}),(0,s.jsx)(l.gN,{type:"text",id:"title",name:"title",required:!0}),(0,s.jsx)(l.Bc,{name:"title",component:"div"})]}),(0,s.jsxs)("div",{className:"application-form__field-wrap",children:[(0,s.jsxs)("div",{className:"application-form__field",children:[(0,s.jsx)("label",{htmlFor:"lastName",children:"Фамилия"}),(0,s.jsx)(l.gN,{value:t.values.lastName,type:"text",id:"lastName",name:"lastName",required:!0}),(0,s.jsx)(l.Bc,{name:"lastName",component:"div"})]}),(0,s.jsxs)("div",{className:"application-form__field",children:[(0,s.jsx)("label",{htmlFor:"firstName",children:"Имя"}),(0,s.jsx)(l.gN,{value:t.values.firstName,type:"text",id:"firstName",name:"firstName",required:!0}),(0,s.jsx)(l.Bc,{name:"firstName",component:"div"})]}),(0,s.jsxs)("div",{className:"application-form__field",children:[(0,s.jsx)("label",{htmlFor:"patronym",children:"Отчество"}),(0,s.jsx)(l.gN,{value:t.values.patronym,type:"text",id:"patronym",name:"patronym"}),(0,s.jsx)(l.Bc,{name:"patronym",component:"div"})]})]}),(0,s.jsxs)("div",{className:"application-form__field",children:[(0,s.jsx)("label",{htmlFor:"phone",children:"Телефон"}),(0,s.jsx)(l.gN,{value:t.values.phone,type:"tel",id:"phone",name:"phone",required:!0}),(0,s.jsx)(l.Bc,{name:"phone",component:"div"})]}),(0,s.jsxs)("div",{className:"application-form__field",children:[(0,s.jsx)("label",{htmlFor:"code",children:"Ати-код"}),(0,s.jsx)(l.gN,{value:t.values.code,type:"text",id:"code",name:"code",required:!0}),(0,s.jsx)(l.Bc,{name:"code",component:"div"})]}),(0,s.jsxs)("div",{className:"application-form__field",children:[(0,s.jsx)("label",{htmlFor:"comment",children:"Комментарий"}),(0,s.jsx)(l.gN,{value:t.values.comment,as:"textarea",id:"comment",name:"comment"})]}),(0,s.jsxs)("div",{className:"application-form__buttons",children:[(0,s.jsx)(o.z,{view:"outlined-success",size:"l",type:"submit",children:e?"Изменить":"Добавить"}),e&&(0,s.jsx)(o.z,{view:"outlined-danger",size:"l",className:"application-form__reset",onClick:resetForm,type:"button",children:(0,s.jsx)(r.Z,{})})]})]}))})});var u=(0,c.Pi)(e=>{let{isAdminMode:t}=d.default;return t?(0,s.jsx)(p,{...e}):null})},9292:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return v}});var s=i(7437),a=i(1260),l=i(1100);i(9880);var n=i(2265),c=i(2744),d=i.n(c);i(2346);var status_Status=e=>{let{value:t}=e,i=d()("application-status",t);return(0,s.jsx)("span",{className:i,children:{new:"Новая",inProgress:"В процессе",completed:"Завершенная"}[t]})},date_Date=e=>{let{values:t}=e,{day:i,month:a,year:l}=t,dateToString=e=>{let t=e+".";return t.length<3?"0"+t:t};return(0,s.jsxs)("span",{children:[dateToString(i),dateToString(a),l]})},o=i(4089),r=i(9715),m=i(3386),p=i(3147),u=i(4530),h=i(2576),x=i(168);i(9370);let _=(0,l.Pi)(e=>{let[t,i]=(0,n.useState)(!1),{removeApplication:l}=a.default,{isAdminMode:c,setItemIdToChange:d}=m.default,_=(0,n.useRef)(null);return(0,s.jsxs)("div",{className:"details",children:[(0,s.jsxs)("div",{className:"details-desktop",children:[(0,s.jsxs)("button",{className:"item-details__btn",onClick:()=>e.toggleValue(!e.value),children:[(0,s.jsx)("span",{className:"item-details__text",children:"Подробнее"}),(0,s.jsx)(u.Z,{className:"item-details__mobile"})]}),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.z,{view:"outlined",size:"s",onClick:()=>d(e.id),type:"button",children:(0,s.jsx)(o.Z,{})}),(0,s.jsx)(p.z,{view:"outlined-danger",size:"s",type:"button",onClick:()=>l(e.id),children:(0,s.jsx)(r.Z,{})})]})]}),(0,s.jsx)("button",{className:"details-mobile",ref:_,onClick:()=>{i(!t)},children:(0,s.jsx)(u.Z,{})}),(0,s.jsx)(h.G,{className:"details-mobile__popup",anchorRef:_,open:t,onOutsideClick:()=>i(!1),children:(0,s.jsxs)(x.v,{children:[(0,s.jsx)(x.v.Item,{className:"details-mobile__popup-btn ",onClick:()=>e.toggleValue(!e.value),children:"Подробно"}),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.v.Item,{className:"details-mobile__popup-btn",onClick:()=>d(e.id),children:"Редактировать"}),(0,s.jsx)(x.v.Item,{theme:"danger",className:"details-mobile__popup-btn details-mobile__popup-delete",onClick:()=>l(e.id),children:"Удалить"})]})]})})]})});var listItem_ListItem=e=>{let{application:t}=e,[i,a]=(0,n.useState)(!1),l=d()("application-list__item",i?"opened":""),c=`https://ati.su/firms/${t.userData.code}/info`;return(0,s.jsxs)("div",{className:l,children:[(0,s.jsxs)("div",{className:"application-list__item-data",children:[(0,s.jsx)("h3",{className:"application-list__item-section",children:t.userData.title}),(0,s.jsxs)("div",{className:"application-list__item-section item-name",children:[(0,s.jsxs)("span",{children:[t.userData.firstName," "]}),(0,s.jsxs)("span",{children:[t.userData.lastName," "]}),(0,s.jsxs)("span",{children:[t.userData.patronym," "]})]}),(0,s.jsx)("div",{className:"application-list__item-section item-date",children:(0,s.jsx)(date_Date,{values:t.date})}),(0,s.jsx)("div",{className:"application-list__item-section item-status",children:(0,s.jsx)(status_Status,{value:t.status})}),(0,s.jsx)("div",{className:"application-list__item-section item-details",children:(0,s.jsx)(_,{id:t.id,value:i,toggleValue:e=>{a(e)}})})]}),(0,s.jsxs)("div",{className:"application-list__additional",children:[(0,s.jsxs)("div",{className:"application-list__item-section mobile-name",children:[(0,s.jsx)("div",{className:"application-list__additional-title",children:"Ф.И.О. заказчика"}),(0,s.jsxs)("p",{children:[t.userData.firstName+" ",t.userData.lastName+" ",t.userData.patronym+" "]})]}),(0,s.jsxs)("div",{className:"application-list__item-section",children:[(0,s.jsx)("div",{className:"application-list__additional-title",children:"Телефон"}),(0,s.jsx)("a",{href:`tel:${t.userData.phone}`,children:t.userData.phone})]}),(0,s.jsxs)("div",{className:"application-list__item-section item-code",children:[(0,s.jsx)("div",{className:"application-list__additional-title",children:"ATI"}),(0,s.jsx)("a",{href:c,children:c})]}),(0,s.jsxs)("div",{className:"application-list__item-section item-comment",children:[(0,s.jsx)("div",{className:"application-list__additional-title",children:"Комментарий"}),(0,s.jsx)("p",{children:t.userData.comment||"..."})]})]})]})};let j=(0,l.Pi)(()=>{let e=a.default.list;return e.length<=0?(0,s.jsx)("p",{className:"application-list__zero",children:"Пока нет заявок"}):(0,s.jsxs)("div",{className:"application-list",children:[(0,s.jsx)("div",{className:"application-list__head",children:(0,s.jsxs)("div",{className:"application-list__item-data",children:[(0,s.jsx)("div",{className:"application-list__item-section",children:"Название компании"}),(0,s.jsx)("div",{className:"application-list__item-section item-name",children:"Ф.И.О"}),(0,s.jsx)("div",{className:"application-list__item-section item-date",children:"Дата"}),(0,s.jsx)("div",{className:"application-list__item-section item-status",children:"Статус"}),(0,s.jsx)("div",{className:"application-list__item-section item-details",children:(0,s.jsxs)("p",{children:["Кол-во: ",e.length]})})]})}),e.map(e=>(0,s.jsx)(listItem_ListItem,{application:e},"list-item"+e.id))]})});var v=j},1260:function(e,t,i){"use strict";i.d(t,{default:function(){return n}});var s=i(4256),a=i(1872);function getDate(){let e=new Date,t=e.getDate(),i=e.getMonth()+1,s=e.getFullYear();return{day:t,month:i,year:s}}var l=i(3386),n=new class{constructor(){this.list=[{id:"1",userData:{title:"Мувит Мувит",firstName:"Василий",lastName:"Иванов",patronym:"Михайлович",phone:"89021111111",code:"12345"},date:{day:20,month:12,year:2022},status:"completed"},{id:"2",userData:{title:"Том Груз",firstName:"Иван",lastName:"Виноградов",patronym:"Васильевич",phone:"89021111111",code:"12345"},date:{day:10,month:20,year:2022},status:"completed"},{id:"3",userData:{title:"Expert Logistics",firstName:"Владислав",lastName:"Филиппов",patronym:"Михайлович",phone:"89021111111",code:"12345"},date:{day:4,month:5,year:2024},status:"new"}],this.addNewApplication=e=>{let t={userData:e,date:getDate(),status:"new",id:(0,a.Z)()};this.list.unshift(t)},this.changeApplication=e=>{let t=l.default.itemIdToChange,i=this.list.find(e=>e.id===t);i&&(i.id=(0,a.Z)(),i.userData=e,i.status="inProgress",i.date=getDate())},this.removeApplication=e=>{this.list=this.list.filter(t=>t.id!=e)},(0,s.ky)(this)}}},3386:function(e,t,i){"use strict";var s=i(4256);t.default=new class{constructor(){this.isAdminMode=!1,this.itemIdToChange=null,this.toggleAdminMode=e=>{e||(this.itemIdToChange=null),this.isAdminMode=e},this.setItemIdToChange=e=>{this.itemIdToChange=e},(0,s.ky)(this)}}},9510:function(){},9880:function(){},9370:function(){},2346:function(){}},function(e){e.O(0,[147,479,463,971,472,744],function(){return e(e.s=7021)}),_N_E=e.O()}]);